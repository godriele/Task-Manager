<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
  </head>
  <body>
    <h1>Welcome, {{ current_user.username }}</h1>
    <a href="{{ url_for('logout') }}">Logout</a>

    <h2>Your Tasks</h2>
    <ul>
      {% for task in tasks %}
      <li>
        <strong>{{ task.title }}</strong>: {{ task.description }}<br />
        <em>Status: {{ task.status.value }}</em><br />

        <!-- Update Status Links -->
        <a
          href="{{ url_for('update_task_status', task_id=task.id, status='PENDING') }}"
          >Set to Pending</a
        >
        |
        <a
          href="{{ url_for('update_task_status', task_id=task.id, status='IN_PROGRESS') }}"
          >Set to In Progress</a
        >
        |
        <a
          href="{{ url_for('update_task_status', task_id=task.id, status='COMPLETED') }}"
          >Set to Completed</a
        >
        |
      </li>
      {% endfor %}
    </ul>

    <h3>Add Task</h3>
    <form action="{{ url_for('add') }}" method="POST">
      <input type="text" name="title" placeholder="Task Title" required /><br />
      <textarea
        name="description"
        placeholder="Task Description"
        required
      ></textarea
      ><br />

      <!-- Dropdown for task status -->
      <label for="status">Status:</label>
      <select name="status" id="status" required>
        <option value="PENDING">Pending</option>
        <option value="IN_PROGRESS">In Progress</option>
        <option value="COMPLETED">Completed</option></select
      ><br />

      <button type="submit">Add Task</button>
    </form>
  </body>
</html>
